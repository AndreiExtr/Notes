(function(){"use strict";var e={304:function(e,t,o){var n=o(751),s=o(641);function i(e,t){const o=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(o)}var r=o(262);const a={},c=(0,r.A)(a,[["render",i]]);var l=c,d=o(220);const u={class:"home"},h={class:"home__content"},f={class:"rectangle"};function x(e,t,o,n,i,r){const a=(0,s.g2)("NoteUI");return(0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("div",h,[(0,s.Lk)("div",f,[(0,s.Lk)("div",{class:"square red",onClick:t[0]||(t[0]=e=>r.createNote("#FEB1B1"))}),(0,s.Lk)("div",{class:"square blue",onClick:t[1]||(t[1]=e=>r.createNote("#B1D0FE"))}),(0,s.Lk)("div",{class:"square yellow",onClick:t[2]||(t[2]=e=>r.createNote("#FCFEB1"))}),(0,s.Lk)("div",{class:"square green",onClick:t[3]||(t[3]=e=>r.createNote("#c2ffc2"))})]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.notes,((e,t)=>((0,s.uX)(),(0,s.Wv)(a,{key:t,note:e,index:t,notes:i.notes,selectedNoteIndex:i.selectedNoteIndex,onUpdatePosition:e=>r.updatePosition(t,e),onUpdateText:e=>r.updateText(t,e),onDeleteNote:e=>r.deleteNote(t),onUpdateSelectedNote:r.updateSelectedNote},null,8,["note","index","notes","selectedNoteIndex","onUpdatePosition","onUpdateText","onDeleteNote","onUpdateSelectedNote"])))),128))])])}var p=o(953),g=o(33);function v(e,t,o,i,r,a){return(0,s.uX)(),(0,s.CE)("div",{class:"note",style:(0,g.Tr)({left:o.note.x+"px",top:o.note.y+"px",backgroundColor:o.note.color})},[(0,s.Lk)("button",{class:"delete-btn",onClick:t[0]||(t[0]=(...e)=>a.deleteNote&&a.deleteNote(...e))},t[4]||(t[4]=[(0,s.Lk)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M6 6L18 18M18 6L6 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),(0,s.Lk)("div",{class:"mouse",onMousedown:t[1]||(t[1]=(...e)=>a.startDrag&&a.startDrag(...e))},null,32),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.text=e),placeholder:"Введите текст",onInput:t[3]||(t[3]=(...e)=>a.updateText&&a.updateText(...e)),ref:"textarea"},null,544),[[n.Jo,r.text]])],4)}var m={name:"NoteUI",props:{note:Object,index:Number},data(){return{text:this.note.text,isDragging:!1,offset:{x:0,y:0},selectedNoteIndex:{type:Number,default:null},notes:[{text:"Заметка 1",x:400,y:400,color:"red"},{text:"Заметка 2",x:200,y:200,color:"blue"},{text:"Заметка 3",x:100,y:100,color:"yellow"},{text:"Заметка 4",x:300,y:300,color:"green"}]}},watch:{note:{handler(e){this.text=e.text,this.$nextTick((()=>this.adjustHeight()))},deep:!0}},mounted(){this.adjustHeight()},methods:{deleteNote(){this.$emit("deleteNote",this.index)},startDrag(e){this.isDragging=!0,this.offset.x=e.clientX-this.note.x,this.offset.y=e.clientY-this.note.y,window.addEventListener("mousemove",this.drag),window.addEventListener("mouseup",this.stopDrag)},drag(e){if(this.isDragging){const t=e.clientX-this.offset.x,o=e.clientY-this.offset.y;this.$emit("updatePosition",{x:t,y:o})}},stopDrag(){this.isDragging=!1,window.removeEventListener("mousemove",this.drag),window.removeEventListener("mouseup",this.stopDrag)},updateText(){this.adjustHeight(),this.$emit("updateText",this.text)},adjustHeight(){this.$nextTick((()=>{const e=this.$refs.textarea;e&&(e.style.height=e.scrollHeight+"px")}))}}};const N=(0,r.A)(m,[["render",v]]);var y=N,w={name:"HomeView",components:{NoteUI:y},data(){return{notes:[],connections:[],selectedNoteIndex:null}},created(){this.loadNotes()},methods:{loadNotes(){const e=localStorage.getItem("notes");if(e)try{const t=JSON.parse(e);this.notes=t.map((e=>({...e,connections:e.connections||[]})))}catch(t){console.error("Ошибка при загрузке заметок:",t)}},saveNotes(){localStorage.setItem("notes",JSON.stringify(this.notes))},updateSelectedNote(e){this.selectedNoteIndex=e},createNote(e){const t=300*Math.random(),o=300*Math.random(),n={x:t,y:o,color:e,text:"",connections:[]};this.notes.push(n),this.saveNotes()},updatePosition(e,t){const o=this.$el.querySelector(".home__content").getBoundingClientRect(),n=Math.max(0,Math.min(t.x,o.width-200)),s=Math.max(0,Math.min(t.y,o.height-110));this.notes[e]={...this.notes[e],x:n,y:s},this.saveNotes()},updateText(e,t){this.notes[e].text=t,this.saveNotes()},deleteNote(e){this.notes.splice(e,1),this.saveNotes()},drawConnections(){const e=this.$refs.canvas,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),this.notes.forEach(((e,o)=>{e.connections&&Array.isArray(e.connections)&&e.connections.length>0?e.connections.forEach((e=>{const n=(0,p.ux)(this.notes[o]),s=(0,p.ux)(this.notes[e]);if(!n||!s)return void console.error("Одна из заметок не найдена:",n,s);const i=n.x+100,r=n.y+50,a=s.x+100,c=s.y+50;t.beginPath(),t.moveTo(i,r),t.lineTo(a,c),t.strokeStyle=n.color||"#ff5a00",t.lineWidth=2,t.stroke()})):console.log(`Заметка ${o} не имеет связей`)}))}}};const k=(0,r.A)(w,[["render",x]]);var b=k;const L=[{path:"/",name:"home",component:b}],C=(0,d.aE)({history:(0,d.LA)("/Notes/"),routes:L});var E=C,T=o(278),O=(0,T.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,n.Ef)(l).use(O).use(E).mount("#app")}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,i){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],i=e[d][2];for(var a=!0,c=0;c<n.length;c++)(!1&i||r>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(a=!1,i<r&&(r=i));if(a){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,r=n[0],a=n[1],c=n[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(c)var d=c(o)}for(t&&t(n);l<r.length;l++)i=r[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=self["webpackChunknotes"]=self["webpackChunknotes"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(304)}));n=o.O(n)})();
//# sourceMappingURL=app.9d226ca6.js.map